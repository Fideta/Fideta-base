"use strict";(self.webpackChunkfideta_site=self.webpackChunkfideta_site||[]).push([[862],{4454:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var o=n(6540),r=n(1656),i=n(4848);function a(){return(0,o.useEffect)(()=>{if(window.innerWidth>768)return void(window.location.href="/");window.history.replaceState(null,"","/scanner");const e=document.createElement("script");e.src="https://unpkg.com/@ericblade/quagga2@1.2.6/dist/quagga.min.js",e.onload=()=>{(()=>{if(!window.Quagga)return;window.Quagga.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#scanner"),constraints:{facingMode:"environment"},area:{top:"25%",bottom:"25%",left:"15%",right:"15%"}},decoder:{readers:["ean_reader"],debug:{drawBoundingBox:!0,showPattern:!0,showFoundPatches:!0}},locate:!0,numOfWorkers:0,frequency:5},e=>{e?console.error(e):window.Quagga.start()});let e=null,t=0;window.Quagga.onDetected(n=>{const o=n.codeResult?.code;o&&/^[0-9]{13}$/.test(o)&&(o===e?t+=1:(e=o,t=1),t>=2&&(window.Quagga.stop(),navigator.vibrate&&navigator.vibrate(100),fetch("/ean-index.json").then(e=>e.json()).then(e=>{const t=e[o];t?window.location.replace(t):alert("Produit non reconnu")})))})})()},document.body.appendChild(e)},[]),(0,i.jsxs)(r.A,{title:"Scanner un produit",children:[(0,i.jsx)("a",{href:"/",onClick:e=>{e.preventDefault(),window.location.href="/"},style:{position:"fixed",top:"1rem",left:"1rem",zIndex:3,color:"white",fontWeight:"bold",textDecoration:"none",fontSize:"1.2rem",backgroundColor:"rgba(0,0,0,0.5)",padding:"0.5rem 1rem",borderRadius:"8px"},children:"\u2b05 Retour"}),(0,i.jsx)("div",{id:"scanner",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,backgroundColor:"black"}}),(0,i.jsx)("div",{id:"overlay-rectangle",style:{position:"fixed",top:"25%",left:"15%",width:"70%",height:"50%",border:"2px solid #00ff00",borderRadius:"8px",zIndex:2,boxSizing:"border-box",pointerEvents:"none"}})]})}}}]);