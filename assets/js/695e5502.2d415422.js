"use strict";(self.webpackChunkfideta_site=self.webpackChunkfideta_site||[]).push([[862],{4454:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});var n=o(6540),r=o(1656),a=o(4848);function i(){return(0,n.useEffect)(()=>{if(window.innerWidth>768)return alert("\ud83d\udcf5 Cette page est r\xe9serv\xe9e aux appareils mobiles."),void(window.location.href="/");const e=document.createElement("script");e.src="https://unpkg.com/@ericblade/quagga2@1.2.6/dist/quagga.min.js",e.onload=()=>{console.log("\ud83d\udce6 QuaggaJS charg\xe9");(()=>{if(!window.Quagga)return void alert("Quagga non charg\xe9");window.Quagga.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#scanner"),constraints:{facingMode:"environment"},area:{top:"25%",bottom:"25%",left:"15%",right:"15%"}},decoder:{readers:["ean_reader"],debug:{drawBoundingBox:!0,showPattern:!0,showFoundPatches:!0}},locate:!0,numOfWorkers:0,frequency:5},e=>{if(e)return console.error(e),void alert("Erreur cam\xe9ra : "+e.message);window.Quagga.start()});let e=null,t=0;window.Quagga.onDetected(o=>{const n=o.codeResult?.code;n&&/^[0-9]{13}$/.test(n)&&(n===e?t+=1:(e=n,t=1),t>=2&&(window.Quagga.stop(),navigator.vibrate&&navigator.vibrate(100),alert("\u2705 Code d\xe9tect\xe9 : "+n),fetch("/ean-index.json").then(e=>e.json()).then(e=>{const t=e[n];t?window.location.href=t:alert("Produit non reconnu : "+n)})))})})()},document.body.appendChild(e)},[]),(0,a.jsxs)(r.A,{title:"Scanner un produit",children:[(0,a.jsx)("a",{href:"/",style:{position:"fixed",top:"1rem",left:"1rem",zIndex:3,color:"white",fontWeight:"bold",textDecoration:"none",fontSize:"1.2rem",backgroundColor:"rgba(0,0,0,0.5)",padding:"0.5rem 1rem",borderRadius:"8px"},children:"\u2b05 Retour"}),(0,a.jsx)("div",{id:"scanner",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,backgroundColor:"black"}}),(0,a.jsx)("div",{id:"overlay-rectangle",style:{position:"fixed",top:"25%",left:"15%",width:"70%",height:"50%",border:"2px solid #00ff00",borderRadius:"8px",zIndex:2,boxSizing:"border-box",pointerEvents:"none"}})]})}}}]);